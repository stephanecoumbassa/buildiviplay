{"version":3,"sources":["./src/app/services/equipment-reservations/map-equipment/map-equipment.page.scss","./src/app/services/equipment-reservations/map-equipment/map-equipment.page.html","./src/app/services/equipment-reservations/map-equipment/map-equipment.page.ts","./src/app/services/equipment-reservations/map-equipment/map-equipment.module.ts","./src/app/services/equipment-reservations/map-equipment/map-equipment-routing.module.ts"],"names":[],"mappings":"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","file":"services-equipment-reservations-map-equipment-map-equipment-module.js","sourcesContent":["export default \".map {\\n  width: 100%;\\n}\\n\\n#mapwize {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  width: 100%;\\n  height: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL21hcC1lcXVpcG1lbnQucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksV0FBQTtBQUNKOztBQUNFO0VBQ0Usa0JBQUE7RUFDQSxNQUFBO0VBQ0EsU0FBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0FBRUoiLCJmaWxlIjoibWFwLWVxdWlwbWVudC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWFwe1xuICAgIHdpZHRoOiAxMDAlO1xuICB9XG4gICNtYXB3aXplIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGJvdHRvbTogMDtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gIH0iXX0= */\";","export default \"<div class=\\\"map\\\">\\n  <div id=\\\"mapwize\\\"></div>\\n</div>\\n\";","import { Component, ElementRef, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Equipment } from 'src/model/equipment';\nimport { EquipmentReservation, PlacesStyle, PlacesStyles } from 'src/model/room';\nimport { EquipmentServiceService } from '../equipment-service.service';\nimport * as MapwizeUI from 'mapwize-ui'\nimport { EquipmentsMocks } from 'src/mocks/equipments.mocks';\nimport { NavController } from '@ionic/angular';\nimport { GeneralFunctions } from '../../general-functions';\n\n@Component({\n  selector: 'app-map-equipment',\n  templateUrl: './map-equipment.page.html',\n  styleUrls: ['./map-equipment.page.scss'],\n})\nexport class MapEquipmentPage implements OnInit {\n\n  constructor(\n    private equipmentsService : EquipmentServiceService,\n    private activatedRoute : ActivatedRoute,\n    private router : Router,\n    private htmlElement: ElementRef,\n    private navController: NavController,\n    private generalFunctions: GeneralFunctions\n\n\n\n  ) {} \n\n  equipements: Equipment[] = [];\n  currentEquipement: Equipment;\n  reservations: EquipmentReservation[] = [];\n  currentDate;\n  mapWizeRoomStyle:any =[];\n\n  static readonly reservedColor = \"#ff0000\";\n  static readonly occupiedColor = \"#FF8C00\";\n  static readonly availableColor = \"#2E8B57\";\n  static readonly HideColor = \"#DCDCDC\";\n  static readonly placesToHide = [\n    '5d8a1921618902a02a7c7045',//TOILETTE\n    '5d8a1922618902a02a7c7047',//STOCK\n    '5d8a1922618902a02a7c704b',//DIRECTION\n    '5d8a1922618902a02a7c7051',//CUISINE\n    '5d8a1922618902a02a7c7055',//INFORMATIQUE\n    '5d8a1922618902a02a7c7057',//RECEPTION\n    '60003dc82be2a300165dafc3',//TV OS\n    '60003f2219e6de0016bb1eea',//ESCALIER E2\n    '60005f243781c50016f1e778',//ZONE SECURISEE\n    '6006ac00cfdbb200169e1312',//ESPACE VERT E2\n    '5d8a1922618902a02a7c704f',//BOX\n    '5d8a1922618902a02a7c704d'//COMMERCIAL\n  ];\n  \n  mapNavigation(htmlTag){\n    htmlTag.onclick = ()=>{\n      this.router.navigate(['/equipment-reservation'],{relativeTo : this.activatedRoute});\n    }\n  }\n\n  ngOnInit() {  \n    this.currentDate  = new Date();\n    this.reservations = <EquipmentReservation[]> JSON.parse(localStorage.getItem('reservationsEquipment'));\n   this.currentEquipement = {\n      id: this.router.getCurrentNavigation().extras.state.id,\n      mapwizeId: this.router.getCurrentNavigation().extras.state.mapwizeId,\n      name: this.router.getCurrentNavigation().extras.state.name,\n      status: this.router.getCurrentNavigation().extras.state.status,\n      endDate: this.router.getCurrentNavigation().extras.state.endDate,\n      beginDate: this.router.getCurrentNavigation().extras.state.beginDate,\n    };\n\n    this.equipements = this.equipmentsService.getAllEquipments();\n    const options = {\n      apiKey: '6ee4fd2b3531c7b2609c77ca74ee5add',\n      centerOnVenueId: '5d8a191fb99124002d154c93',\n      preferredLanguage:'fr',\n      container: 'mapwize',\n      zoom: 19,\n      mainColor: '#ff0000',\n    }\n    let placesStyles: PlacesStyles = {};\n    this.equipements.map(equipement => {\n      let equipementColor = '';\n      let beginReservationDate = new Date (equipement.beginDate);\n      let endReservationDate = new Date (equipement.endDate);\n\n      if( equipement.id == EquipmentsMocks.busyRoomId ) {\n       equipementColor = MapEquipmentPage.reservedColor;\n      }else if( equipement.id == EquipmentsMocks.occupedRoomId ) {\n       equipementColor = MapEquipmentPage.occupiedColor;\n      }else {\n        if( equipement.id == this.currentEquipement.id) { \n          if(this.currentEquipement.status === 'Libre'){\n            equipementColor = MapEquipmentPage.availableColor;\n          }else{\n            equipementColor = MapEquipmentPage.reservedColor;\n          } \n        }else if(beginReservationDate <= this.currentDate && endReservationDate > this.currentDate){\n          equipementColor = MapEquipmentPage.reservedColor;\n        }else{\n          equipementColor = MapEquipmentPage.availableColor;\n        }\n      }\n      placesStyles[equipement.mapwizeId] = <PlacesStyle>{\n        strokeColor:equipementColor ,\n        strokeOpacity: 1,\n        strokeWidth: 2,\n        fillColor:equipementColor,\n        fillOpacity: 0.7\n      }\n    });\n    let equipementsToHide : PlacesStyles = {}\n    MapEquipmentPage.placesToHide.map(equipementToHIde=>{\n      equipementsToHide[equipementToHIde] = <PlacesStyle>{\n        strokeColor:MapEquipmentPage.HideColor,\n        strokeOpacity: 1,\n        strokeWidth: 2,\n        fillColor:MapEquipmentPage.HideColor,\n        fillOpacity: 0.5\n      }\n    })\n    MapwizeUI.map(options).then((map) => {\n      \n      this.generalFunctions.mapCss(map,'/equipment-reservation')\n\n      MapwizeUI.Api.getPlace(this.currentEquipement.mapwizeId).then((place) => {\n        const position = {\n          latitude: place.marker.latitude,\n          longitude: place.marker.longitude,\n          floor: 2,\n        };\n        map.setPlaceStyles(placesStyles)\n        map.setPlaceStyles(equipementsToHide)\n        map.addMarker(position)\n        .then(function(mapInstance){\n        })\n        .catch((err) => {\n          alert('Erreur probème serveur veuillez réssayer plus tard');\n        });\n      });\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MapEquipmentPageRoutingModule } from './map-equipment-routing.module';\n\nimport { MapEquipmentPage } from './map-equipment.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    MapEquipmentPageRoutingModule\n  ],\n  declarations: [MapEquipmentPage]\n})\nexport class MapEquipmentPageModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { MapEquipmentPage } from './map-equipment.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MapEquipmentPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MapEquipmentPageRoutingModule {}\n"],"sourceRoot":"webpack:///"}